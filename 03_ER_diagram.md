# 1個目のER図

## 全体
- それぞれのテーブルに登録日、更新日の項目が記述されていませんでした。ActiveRecordでデフォルトで作られる登録日、更新日の記述もお願いいたします。もし持たないのであれば理由を教えてください。

## 購入履歴
-購入履歴テーブルのPKが記述されていません。
 PKはあくまでもレコードを一意に判別するためのキーです。現状では購入履歴を一意に判別出来ません。

## 決算
-カートテーブルと決算テーブル間にリレーションがありますが、FKが見当たりません。
 適切にFKが設定されていないので、これでは購入時の合計金額を算出する事が出来ません。

## エンドユーザー
- PKにユーザーIDとの記載がありますがテーブル名はエンドユーザーです。PKはあくまでもレコードを一意に判別するためのキーです。PKはテーブル名+IDとの形にしましょう。
-エンドユーザが退会した場合、該当のレコードはどうなりますか。

## 配送先
- ユーザの登録住所以外にも、配送先を指定したい場合はどうなりますか。毎回手入力を行うのでしょうか。配送先を複数持てるようにしてほしいです。(amazonのような形式が理想です）

## 商品
- 曲カラムがありますが、同一カラムに複数の曲名を入れるということでしょうか。
* 1曲だけ曲名を変更したい・1曲だけ削除したい、など、後からデータを変更する際に不便になります。
* 複数ディスク、曲順などの管理も難しくなります。
* ユーザー側に表示するときにデザインも当てづらくなります。
カリキュラム「チーム開発の手引き」＞「設計」＞データベース設計スライドの29枚目以降を再確認してください。

-発売日はどのように管理しますか。
- 在庫数カラムがありますが、商品が入荷するたびに数値を変更するのでしょうか。
* 例えば現在の在庫が100個あって、入荷が350個あった場合、在庫数を450と入力する運用だとすると計算ミスを誘発しやすく、実際の在庫数とデータベース上の在庫数に差が生まれやすい構造となります。入荷したタイミングで入荷数を入れられるようにすれば楽です。
* 運営上、「いつ、どの商品が入荷したか」という情報を管理しておく方が安全な運用です。入荷数の証拠にもなります。

## カートテーブル
- PKに注文IDとの記載がありますがテーブル名はカートです。PKはあくまでもレコードを一意に判別するためのキーです。PKはテーブル名+IDとの形にしましょう。
- カート内の商品は顧客ごとに異なりますが、どのように判断しますか。
- カートテーブルという命名ですが、表現されているのは「カートの中身」かと思います。カートは一つ、その中に入っている商品は複数、というイメージかと思いますので、テーブル名を「カートアイテム」「カート内商品」のような命名にすると良いかと思います。
-- 商品の価格が変更された場合、このテーブルのデータはどうなりますか。

## 決算
- テーブル名は、「受注」「注文」のような命名にしましょう。
- データベースの情報は管理者が利用します。管理者側のアクションにしましょう。
- 1会計で何を買ったか判断できますか？（同梱の判断ができるか）
- 合計金額を保存しているカラムがありません。注文明細のデータを計算すれば算出できる値ですが、証跡として計算結果を残しておくことが多いです（計算できる値は原則DBに持ちませんが、お金のことは細心の注意が必要です）。「顧客に請求した金額と、その内訳を店側で説明できるようにしておく」必要があります。
-どこのテーブルにも送料の情報が保存されていないので、購入時の送料を確認する事が出来ません。

## 購入履歴
- 購入後に値下げが起こった場合、購入時の価格は確認できますか。
- 何を購入したか判別できますか。
- 何を購入したか判別できます。

## 入荷
- 要件に「入荷履歴を表示できること（入荷した日時、入荷した商品、個数）」がありますが、どのように実現しますか。

## お問い合わせ
- 店が返信した内容は保持できますか。

## 管理者
- 管理者テーブルとエンドユーザーテーブル、管理者テーブルと商品テーブルにリレーションがありますが、理由はありますか。

# 二個目のER図
##管理者
- 管理者テーブルとエンドユーザーテーブル,管理者テーブルと商品テーブルにリレーションがありますが、理由はありますか。
-PKの記述がありません。カートテーブルを一意に判別したい場合にはどうしますか。
- 管理者テーブルとエンドユーザーテーブル,管理者テーブルと商品テーブルに線がつながっていますが、理由はありますか。

## カートアイテムテーブル
-PKの記述がありませんでした。カートテーブルを一意に判別したい場合にはどうしますか。

## エンドユーザー
-漢字で入力された名前はどこに保存されるのでしょうか。
-エンドユーザーが退会した場合は,該当のレコードはどうなりますか。
-エンドユーザーテーブルには住所カラムとは別に配送先カラムがあります。二つの住所しか登録できないのでしょうか。

## 配送先テーブル
-ユーザの登録住所以外にも,配送先を複数持てるようにしてほしいです。(amazonのような形式が理想です)

## 商品
-販売日はどのように管理しますか。
-在庫数カラムがありますが、商品が入荷するたびに数値を変更するのでしょうか。
*例えば現在の在庫が100個あって,入荷が350個あった場合,在庫数を450と入力する運用だとすると計算ミスを誘発しやすく,実際の在庫数とデータベース上の在庫数に差が生まれやすい構造となります。
入荷したタイミングで入荷数を入れられるようにすれば楽です。
*運営上「いつ,どの商品が入荷したか」という情報を管理しておく方が安全な運用です。
-入荷数の証拠にもなります。

## ディスクテーブル
-複数枚組のCDは登録出来ますか？
(1枚目の1曲目と2枚目の1曲目の区別はつけられますか？)

## 曲
--曲名はどちらに保存する予定でしょうか。

## カートアイテム
-カートアイテムテーブルがカート内の商品を確認するテーブルなのでしょうか。
-FKに商品IDとの記述がありますが、一商品しか登録出来ないのでしょうか。複数の商品をカートにいれることが想定出来ますが、その場合にカート内商品はどのように保存する予定でしょうか。
-小計金額カラムはカート内にいれられている商品の値段の合計でしょうか。

## 購入
- テーブル名は、「受注」「注文」のような命名にしましょう。
    - データベースの情報は管理者が利用します。管理者側のアクションにしておきましょう。
-送料が変更された場合,購入時の送料はいくらだったか確認できますか。
-購入日カラムが記述されていたのですが、created_atと同日になると思います。別で盛った理由はありますか。(間違いではないので、理由があれば知りたいです)

## 購入詳細
-何を購入したか判別できますか。

## 入荷テーブル
-要件に「入荷履歴を表示できること（入荷した日時、入荷した商品、個数）」がありますが、どのように実現しますか。

## 問い合わせ
-店側が返信した内容は保持できますか。

# 二個目のER図

## 管理者
- 管理者テーブルとエンドユーザーテーブル,管理者テーブルと商品テーブルにリレーションがありますが、理由はありますか。
-PKの記述がありません。カートテーブルを一意に判別したい場合にはどうしますか。
- 管理者テーブルとエンドユーザーテーブル,管理者テーブルと商品テーブルに線がつながっていますが、理由はありますか。

## カートアイテムテーブル
-PKの記述がありませんでした。カートテーブルを一意に判別したい場合にはどうしますか。

## エンドユーザー
-漢字で入力された名前はどこに保存されるのでしょうか。
-エンドユーザーが退会した場合は,該当のレコードはどうなりますか。
-エンドユーザーテーブルには住所カラムとは別に配送先カラムがあります。二つの住所しか登録できないのでしょうか。

## 配送先テーブル
-ユーザの登録住所以外にも,配送先を複数持てるようにしてほしいです。(amazonのような形式が理想です)

## 商品
-販売日はどのように管理しますか。
-在庫数カラムがありますが、商品が入荷するたびに数値を変更するのでしょうか。
*例えば現在の在庫が100個あって,入荷が350個あった場合,在庫数を450と入力する運用だとすると計算ミスを誘発しやすく,実際の在庫数とデータベース上の在庫数に差が生まれやすい構造となります。
入荷したタイミングで入荷数を入れられるようにすれば楽です。
*運営上「いつ,どの商品が入荷したか」という情報を管理しておく方が安全な運用です。
-入荷数の証拠にもなります。

## ディスクテーブル
-複数枚組のCDは登録出来ますか？
(1枚目の1曲目と2枚目の1曲目の区別はつけられますか？)

## 曲
--曲名はどちらに保存する予定でしょうか。

## カートアイテム
-カートアイテムテーブルがカート内の商品を確認するテーブルなのでしょうか。
-FKに商品IDとの記述がありますが、一商品しか登録出来ないのでしょうか。複数の商品をカートにいれることが想定出来ますが、その場合にカート内商品はどのように保存する予定でしょうか。
-小計金額カラムはカート内にいれられている商品の値段の合計でしょうか。

## 購入
- テーブル名は、「受注」「注文」のような命名にしましょう。
    - データベースの情報は管理者が利用します。管理者側のアクションにしておきましょう。
-送料が変更された場合,購入時の送料はいくらだったか確認できますか。
-購入日カラムが記述されていたのですが、created_atと同日になると思います。別で盛った理由はありますか。(間違いではないので、理由があれば知りたいです)

## 購入詳細
-何を購入したか判別できますか。

## 入荷テーブル
-要件に「入荷履歴を表示できること（入荷した日時、入荷した商品、個数）」がありますが、どのように実現しますか。

## 問い合わせ
-店側が返信した内容は保持できますか。
